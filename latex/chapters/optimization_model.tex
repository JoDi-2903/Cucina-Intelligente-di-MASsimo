%!TEX root = ../main.tex

\chapter{Mathematische Formulierung des Optimierungsproblems}
Wir haben ein engagiertes Team von Mitarbeitern und eine Reihe von Einschränkungen, die sich vor allem aus dem Arbeitsschutzgesetz ergeben. Einige Mitarbeiter arbeiten weniger Stunden und Schichten, während andere mehr arbeiten. Das muss nicht ausgewogen oder fair sein, sondern muss bestmöglich zur Zielfunktion beitragen. Die Herausforderung besteht darin, die Mitarbeiter für den nächsten Tag so einzusetzen, dass der Gesamtgewinn maximiert wird. Die Mitarbeiter werden im Laufe des Tages weder versetzt noch ausgewechselt. Darüber hinaus hat jeder Mitarbeiter einen spezifischen \mintinline{text}{customer_capacity}-Faktor, der seine Effizienz oder sein Qualifikationsniveau darstellt -- je höher dieser Faktor, desto höher das Gehalt des Mitarbeiters.

Nachfolgend wird das Optimierungsproblems der Schichtplanung mathematisch mit allen erforderlichen Entscheidungsvariablen, Parametern, Zielfunktionen und Nebenbedingungen definiert.

\subsection*{Entscheidungsvariablen}
Sei:
\begin{itemize}
    \item $ x_{a,t} \in \{0, 1\} $\\
          Eine binäre Variable, die angibt, ob der Service-Agent $ a $ im Zeitfenster $ t = \{ 0, \dots, 23\} $ arbeitet (1 = arbeitet, 0 = arbeitet nicht).
    \item $ y_{a,s} \in \{0, 1\} $\\
          Eine binäre Variable, die angibt, ob der Service-Agent $ a $ der Schicht $ s $ zugewiesen wurde (1 = zugewiesen, 0 = nicht zugewiesen).
\end{itemize}

\subsection*{Parameter}
Sei:
\begin{itemize}
    \item $ c_a $\\
          Gehalt pro Zeitschritt für den Service-Agenten $ a $.
    \item $ p_a $\\
          Kapazität des Service-Agenten $ a $. Gibt an, wie viele Kunden er gleichzeitig in einem Zeitschritt bedienen kann.
    \item $ v_t $\\
          Prognostizierte Anzahl an Besuchern im Zeitfenster $ t $.
    \item $ L_a = 36 $\\
          Maximale Länge einer einzelnen Schicht für den Service-Agenten $ a $. (36 Schritte = 6 Stunden).
    \item $ P_a = 6 $\\
          Minimale Pausenzeit zwischen zwei Schichten eines Service-Agenten (6 Schritte = 1 Stunde).
    \item $ M_a = 48 $\\
          Maximale Anzahl an Zeitschritten (10-Minuten-Blöcke), die ein Service-Agent $ a $ pro Tag arbeiten darf (48 Schritte = 8 Stunden).
    \item $ S_a = 3 $\\
          Maximale Anzahl an Schichten, die ein Service-Agent $ a $ pro Tag arbeiten darf.
    \item $ T = \{1, 2, ..., 144\}$\\
          Menge aller Zeitfenster eines Tages, wobei jedes Zeitfenster eine Dauer von 10 Minuten hat (144 Zeitfenster für einen Zeitraum von 24 Stunden).
\end{itemize}

\subsection*{Zielfunktion}
Das Ziel ist es, den Gewinn des Restaurants zu maximieren, indem die Kundennachfrage erfüllt und gleichzeitig die Personalkosten minimiert werden. Die Zielfunktion lautet:
$$\text{Minimiere } f(x) = \sum_{t \in T} \sum_{a \in A} c_a x_{a,t}$$
Dabei:
\begin{itemize}
    \item Der erste Term repräsentiert den Gesamterlös basierend auf der Anzahl der bedienten Kunden. Dieser wird durch die prognostizierte Besuchernachfrage ($v_t$) und die Gesamtkapazität der arbeitenden Agenten ($p_a x_{a,t}$) begrenzt.
    \item Der zweite Term repräsentiert die gesamten Gehaltskosten für alle arbeitenden Agenten.
\end{itemize}

\subsection*{Nebenbedingungen}
\begin{enumerate}
    \item \textbf{Erfüllung der Nachfrage}\\
          Die Gesamtkapazität der zugewiesenen Agenten muss mindestens so groß sein wie die Besuchernachfrage in jedem Zeitfenster:
          $$\sum_{a \in A} p_a x_{a,t} \geq v_t, \quad \forall t \in T$$
    \item \textbf{Maximale Arbeitszeit pro Agent}\\
          Jeder Agent darf maximal $M_a = 48$ Zeitschritte pro Tag arbeiten:
          $$\sum_{t \in T} x_{a,t} \leq M_a, \quad \forall a \in A$$
    \item \textbf{Mapping der Service Agents auf Schichten}\\
          Wenn ein Agent in einer Schicht arbeitet, muss die binäre Variable $x$ den selben Wert haben wie die Schicht.
          \begin{itemize}
              \item Gurobi Syntax: $ y_{a,s} = 1 \Rightarrow x_{a,t} = 1, \quad \forall t \in S $
              \item PyOptInterface Syntax: $ y_{a,s} \leq x_{a,t}, \quad \forall t \in S $
          \end{itemize}
    \item \textbf{Maximale Anzahl an Schichten}\\
          Jeder Agent darf maximal $S_a = 3$ Schichten pro Tag übernehmen:
          $$\sum_{s \in S} y_{a,s} \leq S_a,\quad\forall a\in A$$
    \item \textbf{Binäre Entscheidungsvariablen}\\
          Die Variablen müssen binär sein:
          $$x_{a,t}, y_{a,s} \in \{0,1\},\quad\forall a,t,s$$
\end{enumerate}

Diese mathematische Formulierung deckt die Anforderungen des Problems ab und dient als präzise Grundlage für die Implementierung eines Optimierungsmodells zur Schichtplanung in Python.
